import asyncio
import nextcord
import os
from dotenv import load_dotenv
load_dotenv()


async def main():
    client = nextcord.Client()
    await client.login(os.environ['lordcord_token'])

    guild_ids = [1150061246549340271, 1150061310059483136, 1150061441420902440, 1150061851237949450, 1150061921668706394, 1150061995752702064, 1150062092825673759, 1150062424012107837, 1150062491431358464, 1150062752187031623, 1150062807161774141, 1150062869644329030, 1150063097185316936, 1150063197043302430, 1150063969969647708, 1150064146281398352, 1150064215906861227, 1150064659441926174, 1150064855940870194, 1150065632558186547, 1150065721162875032, 1150066100319559720, 1150066260915257414, 1150068654566813768, 1150069627452411944,
                 1150069856125857812, 1150070124385148988, 1150070258523197600, 1150070426307932281, 1150070850561781790, 1150070986096529471, 1150071092472459356, 1150071364003315882, 1150071449051209748, 1150071800248664224, 1150071922491658300, 1150072035414921327, 1150072330853306388, 1150072710072901693, 1150073123308327027, 1150073237942845440, 1150073379060207757, 1150073606504726609, 1150073745969524738, 1150073867860185200, 1150074374112677958, 1150074497622356119, 1150074632456638616, 1150074835645513768, 1150075015849574410]

    for gid in guild_ids[:10]:
        await client._connection.http.leave_guild(gid)

    await client.http._HTTPClient__session.close()


if __name__ == '__main__':
    asyncio.run(main())
